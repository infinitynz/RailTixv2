<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>@ViewData["Title"] - RailTix</title>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300..800&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	@RenderSection("Styles", required: false)
</head>
<body>
	<header>
		<div class="site-header">
			<nav class="nav" role="navigation" aria-label="main navigation">
				<div class="container">
					<div class="header-wrapper">
						<a class="nav-brand" asp-controller="Home" asp-action="Index">
							<img src="~/images/railtix-logo.png" />
						</a>

						<div id="navMain" class="nav-menu">
							@if (User?.Identity?.IsAuthenticated ?? false)
							{
								<a class="nav-item" asp-controller="Account" asp-action="Manage">@User.Identity!.Name</a>
								<div class="nav-item">
									<form asp-controller="Account" asp-action="Logout" method="post">
										<button type="submit" class="btn btn-link">Logout</button>
										@Html.AntiForgeryToken()
									</form>
								</div>
							}
							else
							{
								<a class="nav-item" asp-controller="Account" asp-action="Register">Sign Up</a>
								<a class="nav-item" asp-controller="Account" asp-action="Login">Sign In</a>
							}
						</div>
					</div>
				</div>
			</nav>
		</div>
	</header>
	<main role="main" class="section">
		@RenderBody()
	</main>
	<footer class="section">
		<div class="container" style="color:#9aa0a6;font-size:.875rem;">
			&copy; @DateTime.Now.Year - RailTix
		</div>
	</footer>

	<script>
		// Simple navbar toggle
		(function () {
			const toggle = document.querySelector('.nav-toggle');
			const menu = document.getElementById(toggle?.getAttribute('data-target') || '');
			if (toggle && menu) {
				toggle.addEventListener('click', function () {
					menu.classList.toggle('is-open');
				});
			}
			window.RailTixContext = { isAuthenticated: @(User?.Identity?.IsAuthenticated ?? false ? "true" : "false") };
		})();
	</script>
	<script src="~/js/modules/location/bootstrap.js" asp-append-version="true"></script>
	<script>
		window.RailTixLocation && window.RailTixLocation.init({
			isAuthenticated: window.RailTixContext.isAuthenticated === "true",
			updateUrl: '@Url.Action("Update", "Location")',
			guessUrl: '@Url.Action("Guess", "Location")'
		});
	</script>
	@RenderSection("Scripts", required: false)
</body>
</html>


