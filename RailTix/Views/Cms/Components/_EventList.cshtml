@model RailTix.Models.ViewModels.Cms.CmsEventListComponentViewModel
@using System
@{
	string FriendlyDateTime(DateTime value)
	{
		return value
			.ToString("dd MMM yyyy hh:mm tt")
			.Replace("AM", "a.m.", StringComparison.Ordinal)
			.Replace("PM", "p.m.", StringComparison.Ordinal);
	}
}

<section class="cms-event-list">
	<h3>Events</h3>
	@if (Model == null || Model.Events.Count == 0)
	{
		<p class="cms-event-list__note">No matching events found.</p>
	}
	else
	{
		<ul class="cms-event-list__items">
			@foreach (var item in Model.Events)
			{
				<li class="cms-event-list__item">
					<strong>@item.Title</strong>
					<div class="cms-event-list__meta">
						<span>@FriendlyDateTime(item.StartsAtLocal)</span>
						@if (!string.IsNullOrWhiteSpace(item.VenueName))
						{
							<span> - @item.VenueName</span>
						}
						@if (!string.IsNullOrWhiteSpace(item.City))
						{
							<span>, @item.City</span>
						}
					</div>
				</li>
			}
		</ul>
	}
</section>

